<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>White House</title>
    <script src="scripts/aframe.js"></script>
    <script src="scripts/ada-water.js"></script>
</head>

<body>
    <a-scene shadow="type: pcfsoft">
        <a-assets>
            <img id="floor1" src="textures/aerial_beach_01_rough_4k.jpg" alt="">
            <img id="sky" src="textures/sky.avif" alt="">
            <img id="wall" src="textures/wall brick.jpg" alt="">
            <img id="floor" src="textures/herringbone_brick_02_disp_4k.png" alt="">
            <a-assets-item id="Dream_House" src="models/dream_house_outside_of_town.glb"></a-assets-item>
            <a-assets-item id="gate" src="models/extras/mansion_gate.glb"></a-assets-item>
            <a-assets-item id="gate_light" src="models/extras/street_lamp.glb"></a-assets-item>
             <a-assets-item id="pool" src="models/extras/voxel_swimming_pool.glb"></a-assets-item>
            <a-assets-item id="pool_chairs" src="models/extras/pool_chairs_pack.glb"></a-assets-item>
            <a-assets-item id="tree" src="models/extras/maple_tree.glb"></a-assets-item>
            <a-assets-item id="tree" src="models/extras/maple_tree.glb"></a-assets-item>
            <a-assets-item id="dog" src="models/extras/dog_puppy.glb"></a-assets-item>
        </a-assets>
        
        <a-sky src="#sky"></a-sky>

        
    <!-- floor -->
    <a-plane src="#floor" rotation="-90 0 0" scale="1 1" position="4.525 -4.9 -4" width="120" height="120" shadow="receive: true"
    material="color:#B2BEB5; normal-map:#floor-3; normal-texture-repeat:3 3; repeat: 10 10; scale:1 1">
  </a-plane>
  <a-plane src="#floor" rotation="-90 0 0" scale="1 1" position="-10 -4.9 86" width="20" height="60" shadow="receive: true"
    material="color:#B2BEB5; normal-map:#floor-3; normal-texture-repeat:3 3; repeat: 10 10; scale:1 1">
  </a-plane>

  <!-- floor 1 -->
  <a-plane src="#floor1" rotation="-90 0 0" scale="5 5 0" position="0 -5 0" width="500" height="500"
    material="color:#ffffff; normal-map:#floor-3; normal-texture-repeat:500 500; repeat: 100 100; scale:5000 5000" shadow="receive: true">
  </a-plane>

  <!-- House -->
  <a-entity>
    <a-entity gltf-model="#Dream_House" position="-30 -4.8 -60" scale="3 3 3"></a-entity>
  </a-entity>

  <!-- Gate -->
  <a-entity gltf-model="#gate" position="-59.5 -5.2 115" scale="6 2 2"></a-entity>

 <!--Dog (puppy) with head-only tilt component -->
<a-entity id="puppy" gltf-model="#dog" position="-51 -4.8 18" rotation="0 100 0" scale="2 2 2" tilt-head>
</a-entity>


  <a-entity light="type: directional; color: #B2BEB5; intensity: 0.6; castShadow: true;" 
          position="10 20 10"
          rotation="-45 -45 0"
          shadow-camera-top="50"
          shadow-camera-bottom="-50"
          shadow-camera-left="-50"
          shadow-camera-right="50"
          shadow-map-height="2048"
          shadow-map-width="2048">
</a-entity>

    <!-- Gate Lights -->
    <a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" position="1.5 -7 96.1"></a-entity>
    <a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" position="1.5 -7 76.1"></a-entity>
    <a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" position="1.5 -7 57.1"></a-entity>
    <a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" rotation="0 180 0" position="-22 -7 96.1"></a-entity>
    <a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" rotation="0 180 0" position="-22 -7 76.1"></a-entity>
    <a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" rotation="0 180 0" position="-22 -7 57.1"></a-entity>

<!-- Swimming Pool -->
    <a-entity gltf-model="#pool" scale="0.2 0.2 0.2" width="4" height="4" position="15 -5 90" rotation="0 360 0">
      <!-- increased rotation speed by shortening duration -->
      <a-animation attribute="rotation" dur="3000" to="0 720 0" repeat="indefinite" easing="linear"></a-animation>
    </a-entity>

<!-- Pool Chairs (placed beside pool) -->
  <a-entity gltf-model="url(models/extras/pool_chairs_pack.glb)" position="30 -4.2 88" rotation="0 270 0" scale="2.5 2.5 2.5"></a-entity>

<!-- Water Surface -->
    <!-- increased wave-speed & frequency for faster movement -->
    <a-water opacity="0.6" side="double" width="4.8" height="8" base-color="#0f2d33" foam-color="blue" repeat="2"
     wave-speed="400" wave-height="0.5" wave-frequency="300" rotation="-90 0 0" position="22 -4.25 85" scale="1.5 1.5 1.8">
    </a-water>

    <!-- Pool Toys: simple spheres floating with gentle up/down and slight drift animations -->
    <a-sphere radius="0.3" color="#ff0000" position="22 -4 85" opacity="0.8"
       animation="property: position; to: 22 -3.7 86; dur: 2000; dir: alternate; loop: true; easing: easeInOutSine"
       animation__drift="property: position; to: 22.5 -3.7 85; dur: 4000; dir: alternate; loop: true; easing: easeInOutQuad">
    </a-sphere>
    <a-sphere radius="0.25" color="#00ff00" position="21.5 -4 84.5" opacity="0.8"
       animation="property: position; to: 21.5 -3.6 84.5; dur: 2200; dir: alternate; loop: true; easing: easeInOutSine"
       animation__drift="property: position; to: 21 -3.6 85; dur: 3800; dir: alternate; loop: true; easing: easeInOutQuad">
    </a-sphere>
    <a-sphere radius="0.2" color="#0000ff" position="22.5 -4 84" opacity="0.8"
       animation="property: position; to: 22.5 -3.5 84; dur: 1800; dir: alternate; loop: true; easing: easeInOutSine"
       animation__drift="property: position; to: 23 -3.5 84.5; dur: 3600; dir: alternate; loop: true; easing: easeInOutQuad">
    </a-sphere>

    <!--trees-->
    <a-entity gltf-model="#tree" scale="0.03 0.03 0.03" rotation="0 180 0" position="-38 -4.4 75"></a-entity>

    <a-entity gltf-model="#tree" scale="0.03 0.03 0.03" rotation="0 180 0" position="-38 -4.4 95"></a-entity>

    <a-entity gltf-model="#tree" scale="0.03 0.03 0.03" rotation="0 180 0" position="38 -4.4 95"></a-entity>

    <!-- Camera -->
    <a-entity position="-10 -0.9 110">
      <a-camera user-height="-1.9"></a-camera>
    </a-entity>

    <!-- Ambient and Directional Lights -->
    <a-entity>
      <a-light type="ambient" color="#BBB" intensity="0.4"></a-light>
    </a-entity>
    <a-entity>
      <a-light type="directional" color="#BBB" intensity="0.4" position="-0.5 1 1"></a-light>
    </a-entity>

<!-- second light 1-->
<a-light type="point" 
         color="#ff7b00" 
         intensity="2" 
         distance="20" 
         position="1.5 3 96.1"
         rotation="-90 0 0">
</a-light>

<!-- middle light 1 -->
<a-light type="point"
         color="#ff7b00" 
         intensity="2" 
         distance="20" 
         position="1.5 3 76.1">
</a-light>

<!-- middle light 2 -->
<a-light type="point"
         color="#ff7b00" 
         intensity="2" 
         distance="20" 
         position="1.5 3 57.1">
</a-light>


<!-- second light 2 -->
<a-light type="point" 
         color="#ff7b00" 
         intensity="2" 
         distance="20" 
         position="-22 3 96.1">
</a-light>

<a-light type="point" 
         color="#ff7b00" 
         intensity="2" 
         distance="20" 
         position="-22 3 76.1">
</a-light>

<a-light type="point" 
         color="#ff7b00" 
         intensity="2" 
         distance="20" 
         position="-22 3 57.1">
</a-light>


<a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" position="40 -7 60" rotation="0 270 0"></a-entity>
<a-light type="point" color="#ff7b00" intensity="2" distance="15" position="40 3 60" castShadow="true"></a-light>



<a-entity gltf-model="#gate_light" scale="1.7 1.7 1.7" position="-42 -7 60" rotation="0 270 0"></a-entity>
<a-light type="point" color="#ff7b00" intensity="2" distance="15" position="-42 3 60" castShadow="true"></a-light>

        
        <!-- back wall -->
         <a-box material="src:#wall;
                        normal-texture-repeat:3 3;
                       repeat: 2 2;" 
         height="10"
         width="295" 
         depth="1"
         repeat="0.0002"
         position="-22.5 -3 -184">
        </a-box>

                <!-- right wall -->
        <a-box material="src:#wall;
                       normal-texture-repeat:0.3 0.3;
                       repeat: 2 2;" 
               height="10" 
               width="300" 
               depth="1" 
               position="125 -3 -35"
               rotation="0 90 0">

        <!-- left wall -->
        </a-box>
        <a-box material="src:#wall;
                       normal-texture-repeat:0.3 0.3;
                       repeat: 2 2;" 
               height="10" 
               width="300" 
               depth="1" 
               position="-170 -3 -35"
               rotation="0 90 0">

                       <!-- wall near the gate -->
        </a-box>
        <a-box material="src:#wall;
                       normal-texture-repeat:3 3;
                       repeat: 2 2;" 
               height="8" 
               width="73" 
               depth="1" 
               repeat="0.0002"
               position="88 -5.2 115">
        </a-box>


    </a-scene>

    <script>
      // component to tilt only the head of the puppy model
      AFRAME.registerComponent('tilt-head', {
        init: function () {
          this.head = null;
          this.direction = 1;
          this.angle = 0;
          this.el.addEventListener('model-loaded', () => {
            const mesh = this.el.getObject3D('mesh');
            if (mesh) {
              mesh.traverse(node => {
                if (node.name && /head/i.test(node.name)) {
                  this.head = node;
                }
              });
            }
          });
        },
        tick: function (time, delta) {
          if (!this.head) return;
          const speed = 0.0005;
          this.angle += this.direction * speed * delta;
          if (this.angle > 0.52) { this.angle = 0.52; this.direction *= -1; }
          if (this.angle < -0.52) { this.angle = -0.52; this.direction *= -1; }
          // rotate around Y axis for left/right movement
          this.head.rotation.y = this.angle;
        }
      });
    </script>

</body>

</html>